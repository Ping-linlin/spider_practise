import requests
from bs4 import BeautifulSoup
import os
from multiprocessing import Pool
import sys
import time
import random

proxies_list = [{'http': 'http://116.226.90.12:808'}, {'http': 'http://27.159.125.156:8118'}, {'http': 'http://182.38.172.68:8118'}, {'http': 'http://120.90.6.92:8080'}, {'http': 'http://125.34.91.232:8118'}, {'http': 'http://203.88.210.121:138'}, {'http': 'http://183.56.131.87:3128'}, {'http': 'http://175.155.140.144:808'}, {'http': 'http://182.18.96.94:3128'}, {'http': 'http://222.161.56.166:9000'}, {'http': 'http://222.95.98.97:8118'}, {'http': 'http://121.61.84.63:808'}, {'http': 'http://111.155.116.202:8123'}, {'http': 'http://218.86.128.62:8118'}, {'http': 'http://60.178.84.144:808'}, {'http': 'http://180.76.154.5:8888'}, {'http': 'http://139.224.237.33:8888'}, {'http': 'http://202.121.96.33:8086'}, {'http': 'http://61.191.41.130:80'}, {'http': 'http://58.209.151.126:808'}, {'http': 'http://121.204.165.140:8118'}, {'http': 'http://113.121.240.136:808'}, {'http': 'http://110.87.4.235:808'}, {'http': 'http://124.207.126.15:808'}, {'http': 'http://112.87.169.86:8118'}, {'http': 'http://118.254.126.56:808'}, {'http': 'http://115.220.145.39:808'}, {'http': 'http://27.200.134.42:8118'}, {'http': 'http://115.213.201.24:808'}, {'http': 'http://42.157.7.43:9999'}, {'http': 'http://180.209.162.49:8998'}, {'http': 'http://112.87.92.166:8118'}, {'http': 'http://114.232.80.140:808'}, {'http': 'http://27.222.106.22:80'}, {'http': 'http://119.48.185.63:8118'}, {'http': 'http://115.220.145.217:808'}, {'http': 'http://117.43.1.246:808'}, {'http': 'http://175.155.247.117:808'}, {'http': 'http://49.86.62.56:808'}, {'http': 'http://116.226.127.174:9000'}, {'http': 'http://58.245.103.75:8118'}, {'http': 'http://182.45.119.149:808'}, {'http': 'http://117.24.33.249:808'}, {'http': 'http://60.176.232.71:808'}, {'http': 'http://121.61.103.98:808'}, {'http': 'http://222.95.23.131:808'}, {'http': 'http://119.5.0.126:808'}, {'http': 'http://119.5.1.51:808'}, {'http': 'http://202.108.2.42:80'}, {'http': 'http://113.58.234.151:808'}, {'http': 'http://115.231.175.68:8081'}, {'http': 'http://115.220.145.36:808'}, {'http': 'http://113.121.241.80:808'}, {'http': 'http://36.97.145.29:9797'}, {'http': 'http://118.123.44.23:8998'}, {'http': 'http://119.5.1.103:808'}, {'http': 'http://202.120.31.132:8123'}, {'http': 'http://175.155.24.6:808'}, {'http': 'http://182.43.232.191:808'}, {'http': 'http://60.176.234.192:808'}, {'http': 'http://222.85.39.63:808'}, {'http': 'http://175.155.242.199:808'}, {'http': 'http://119.5.0.80:808'}, {'http': 'http://60.178.87.253:808'}, {'http': 'http://115.220.4.20:808'}, {'http': 'http://115.215.69.108:808'}, {'http': 'http://114.230.31.124:808'}, {'http': 'http://114.232.105.69:46164'}, {'http': 'http://115.220.2.115:808'}, {'http': 'http://175.155.241.225:808'}, {'http': 'http://120.83.100.183:808'}, {'http': 'http://121.206.21.91:808'}, {'http': 'http://210.76.163.216:8118'}, {'http': 'http://115.196.22.164:8118'}, {'http': 'http://183.45.88.38:9797'}, {'http': 'http://117.43.1.61:808'}, {'http': 'http://115.220.0.136:808'}, {'http': 'http://115.203.81.209:808'}, {'http': 'http://175.155.25.57:808'}, {'http': 'http://123.169.91.47:808'}, {'http': 'http://115.203.85.124:808'}, {'http': 'http://119.5.0.4:808'}, {'http': 'http://119.5.1.62:808'}, {'http': 'http://175.155.245.12:808'}, {'http': 'http://220.166.13.18:9797'}, {'http': 'http://114.239.24.234:8998'}, {'http': 'http://113.200.245.158:9999'}, {'http': 'http://123.169.84.165:808'}, {'http': 'http://113.58.235.187:808'}, {'http': 'http://221.229.44.215:808'}, {'http': 'http://115.215.68.235:808'}, {'http': 'http://171.13.36.191:808'}, {'http': 'http://222.186.45.116:55336'}, {'http': 'http://182.43.198.151:808'}, {'http': 'http://60.178.86.170:808'}, {'http': 'http://221.229.46.192:808'}, {'http': 'http://222.178.177.93:8998'}, {'http': 'http://211.84.193.197:8998'}, {'http': 'http://124.88.67.63:80'}, {'http': 'http://119.5.1.5:808'}, {'http': 'http://115.220.2.31:808'}, {'http': 'http://182.44.197.148:808'}, {'http': 'http://14.221.178.206:9000'}, {'http': 'http://115.203.90.163:808'}, {'http': 'http://117.94.201.208:27293'}, {'http': 'http://222.95.20.93:808'}, {'http': 'http://113.93.187.164:808'}, {'http': 'http://123.163.129.148:808'}, {'http': 'http://115.220.0.43:808'}, {'http': 'http://115.220.6.66:808'}, {'http': 'http://119.5.0.32:808'}, {'http': 'http://222.85.39.163:808'}, {'http': 'http://175.43.106.50:808'}, {'http': 'http://113.121.247.212:808'}, {'http': 'http://218.67.126.15:3128'}, {'http': 'http://119.129.97.64:9797'}, {'http': 'http://175.155.245.114:808'}, {'http': 'http://125.89.122.145:808'}, {'http': 'http://110.73.39.104:8123'}, {'http': 'http://110.73.55.214:8123'}, {'http': 'http://115.220.4.93:808'}, {'http': 'http://119.5.0.16:808'}, {'http': 'http://60.184.174.202:808'}, {'http': 'http://123.169.89.7:808'}, {'http': 'http://182.43.233.3:808'}, {'http': 'http://182.32.159.139:808'}, {'http': 'http://114.230.127.246:21182'}, {'http': 'http://113.69.62.210:808'}, {'http': 'http://180.115.1.131:21426'}, {'http': 'http://110.73.52.160:8123'}, {'http': 'http://14.211.123.102:9797'}, {'http': 'http://1.190.68.246:808'}, {'http': 'http://122.241.219.225:808'}, {'http': 'http://175.155.189.96:808'}, {'http': 'http://14.211.119.2:808'}, {'http': 'http://221.229.46.49:808'}, {'http': 'http://222.85.50.82:808'}, {'http': 'http://115.220.1.221:808'}, {'http': 'http://123.169.86.70:808'}, {'http': 'http://112.247.202.174:8118'}, {'http': 'http://175.1.208.137:808'}, {'http': 'http://115.220.7.212:808'}, {'http': 'http://175.155.25.51:808'}, {'http': 'http://121.31.77.101:8123'}, {'http': 'http://221.229.45.162:808'}, {'http': 'http://60.178.86.54:808'}, {'http': 'http://115.220.0.78:808'}, {'http': 'http://121.232.227.230:40956'}, {'http': 'http://175.155.246.90:808'}, {'http': 'http://114.99.14.191:808'}, {'http': 'http://101.94.134.117:8123'}, {'http': 'http://118.144.154.253:3128'}, {'http': 'http://171.37.156.191:8123'}, {'http': 'http://119.5.0.25:808'}, {'http': 'http://183.32.89.81:808'}, {'http': 'http://175.155.240.53:808'}, {'http': 'http://106.81.231.45:8118'}, {'http': 'http://112.85.209.16:808'}, {'http': 'http://119.5.0.171:808'}, {'http': 'http://120.132.71.212:80'}, {'http': 'http://221.229.46.32:808'}, {'http': 'http://115.213.202.47:808'}, {'http': 'http://115.203.92.231:808'}, {'http': 'http://183.32.88.100:808'}, {'http': 'http://111.200.128.58:8123'}, {'http': 'http://113.121.250.107:808'}, {'http': 'http://119.5.0.49:808'}, {'http': 'http://122.241.28.121:808'}, {'http': 'http://221.229.44.28:808'}, {'http': 'http://125.89.123.131:808'}, {'http': 'http://221.229.44.193:808'}, {'http': 'http://60.174.237.43:9999'}, {'http': 'http://140.250.135.141:39982'}, {'http': 'http://222.94.149.37:808'}, {'http': 'http://183.32.89.3:808'}, {'http': 'http://114.239.146.3:808'}, {'http': 'http://115.230.41.61:8118'}, {'http': 'http://175.155.24.86:808'}, {'http': 'http://123.163.160.16:808'}, {'http': 'http://114.239.2.111:808'}, {'http': 'http://119.5.0.33:808'}, {'http': 'http://125.89.123.66:808'}, {'http': 'http://115.203.84.228:808'}, {'http': 'http://123.169.89.91:808'}, {'http': 'http://121.226.173.122:808'}, {'http': 'http://125.89.123.97:808'}, {'http': 'http://119.114.12.122:8080'}, {'http': 'http://123.169.86.18:808'}, {'http': 'http://183.153.2.204:808'}, {'http': 'http://123.54.20.239:8118'}, {'http': 'http://222.85.39.103:808'}, {'http': 'http://113.66.158.96:9797'}, {'http': 'http://114.230.232.189:808'}, {'http': 'http://113.69.61.186:808'}, {'http': 'http://119.5.1.104:808'}, {'http': 'http://125.89.121.102:808'}, {'http': 'http://222.76.118.203:808'}, {'http': 'http://221.229.44.104:808'}, {'http': 'http://221.229.46.179:808'}, {'http': 'http://59.62.113.147:808'}, {'http': 'http://49.86.62.205:808'}, {'http': 'http://112.91.218.21:9000'}, {'http': 'http://115.215.69.242:808'}, {'http': 'http://218.64.93.66:808'}, {'http': 'http://171.38.200.195:8123'}, {'http': 'http://182.122.114.146:8118'}, {'http': 'http://115.220.6.56:808'}, {'http': 'http://175.155.24.89:808'}, {'http': 'http://60.176.77.1:808'}, {'http': 'http://112.111.5.207:8118'}, {'http': 'http://175.155.244.218:808'}, {'http': 'http://60.184.174.159:808'}, {'http': 'http://119.5.0.23:808'}, {'http': 'http://119.5.0.15:808'}, {'http': 'http://221.229.45.87:808'}, {'http': 'http://175.155.25.39:80'}, {'http': 'http://119.5.1.54:808'}, {'http': 'http://122.228.179.178:80'}, {'http': 'http://175.155.242.146:808'}, {'http': 'http://119.5.1.20:808'}, {'http': 'http://121.201.24.248:8088'}, {'http': 'http://175.155.24.16:808'}, {'http': 'http://115.213.201.190:808'}, {'http': 'http://175.155.247.158:808'}, {'http': 'http://114.99.12.101:808'}, {'http': 'http://175.155.25.40:808'}, {'http': 'http://119.7.76.66:808'}, {'http': 'http://114.99.0.115:808'}, {'http': 'http://175.155.25.14:808'}, {'http': 'http://1.196.161.78:9999'}, {'http': 'http://114.239.150.92:808'}, {'http': 'http://125.220.159.161:8080'}, {'http': 'http://218.64.92.39:808'}, {'http': 'http://114.230.219.243:808'}, {'http': 'http://115.220.5.69:808'}, {'http': 'http://113.58.235.71:808'}, {'http': 'http://117.43.0.122:808'}, {'http': 'http://115.220.148.238:808'}, {'http': 'http://115.220.4.154:808'}, {'http': 'http://122.241.72.39:808'}, {'http': 'http://119.5.1.50:808'}, {'http': 'http://222.85.39.68:808'}, {'http': 'http://123.169.86.174:808'}, {'http': 'http://61.160.213.133:1080'}, {'http': 'http://114.230.105.206:808'}, {'http': 'http://119.5.0.46:808'}, {'http': 'http://175.155.25.20:808'}, {'http': 'http://110.230.198.167:8118'}, {'http': 'http://115.220.149.43:808'}, {'http': 'http://221.229.47.49:808'}, {'http': 'http://60.167.134.242:808'}, {'http': 'http://115.231.105.109:8081'}, {'http': 'http://119.5.1.12:808'}, {'http': 'http://175.155.24.46:808'}, {'http': 'http://119.5.1.44:808'}, {'http': 'http://125.81.191.219:8123'}, {'http': 'http://27.158.229.88:808'}, {'http': 'http://218.64.92.18:808'}, {'http': 'http://125.89.123.73:808'}, {'http': 'http://121.61.102.77:808'}, {'http': 'http://119.5.1.33:808'}, {'http': 'http://115.220.146.129:808'}, {'http': 'http://221.229.45.161:808'}, {'http': 'http://222.85.50.34:808'}, {'http': 'http://125.33.243.107:9000'}, {'http': 'http://175.155.25.62:808'}, {'http': 'http://115.220.150.15:808'}, {'http': 'http://123.169.85.252:808'}, {'http': 'http://121.61.97.221:808'}, {'http': 'http://175.155.240.81:808'}, {'http': 'http://122.241.74.206:808'}, {'http': 'http://123.169.91.113:808'}, {'http': 'http://119.5.1.57:808'}, {'http': 'http://222.85.50.105:808'}, {'http': 'http://175.155.240.91:808'}, {'http': 'http://60.184.173.106:808'}, {'http': 'http://117.43.1.149:808'}, {'http': 'http://183.32.88.83:808'}, {'http': 'http://218.64.92.215:808'}, {'http': 'http://114.230.125.7:808'}, {'http': 'http://124.239.177.85:8080'}, {'http': 'http://119.5.0.59:808'}, {'http': 'http://218.64.92.40:808'}, {'http': 'http://222.94.145.140:808'}, {'http': 'http://114.238.23.117:808'}, {'http': 'http://117.43.0.187:808'}, {'http': 'http://175.155.24.26:808'}, {'http': 'http://115.220.147.110:808'}, {'http': 'http://221.229.46.14:808'}, {'http': 'http://125.89.123.224:808'}, {'http': 'http://115.220.6.175:808'}, {'http': 'http://221.229.44.5:808'}, {'http': 'http://115.203.65.95:808'}, {'http': 'http://119.5.1.8:808'}, {'http': 'http://119.5.1.6:808'}, {'http': 'http://117.43.0.249:808'}, {'http': 'http://175.155.240.183:808'}, {'http': 'http://218.75.116.58:9999'}, {'http': 'http://60.184.175.61:808'}, {'http': 'http://119.5.0.121:808'}, {'http': 'http://113.123.39.187:808'}, {'http': 'http://175.155.240.175:808'}, {'http': 'http://110.73.7.65:8123'}, {'http': 'http://114.239.145.177:808'}, {'http': 'http://119.129.98.147:9797'}, {'http': 'http://175.155.242.148:808'}, {'http': 'http://115.220.148.93:808'}, {'http': 'http://221.229.46.250:808'}, {'http': 'http://115.220.151.68:808'}, {'http': 'http://101.76.160.36:1920'}, {'http': 'http://101.23.150.116:9999'}, {'http': 'http://115.203.85.121:808'}, {'http': 'http://175.155.242.59:808'}, {'http': 'http://175.155.246.29:808'}, {'http': 'http://171.38.200.17:8123'}, {'http': 'http://101.23.150.115:9999'}, {'http': 'http://121.226.169.91:808'}, {'http': 'http://175.155.24.60:808'}, {'http': 'http://221.221.221.222:9999'}, {'http': 'http://175.155.240.168:808'}, {'http': 'http://171.37.167.44:8123'}, {'http': 'http://117.43.1.207:808'}, {'http': 'http://110.73.12.159:8123'}, {'http': 'http://175.155.25.22:808'}, {'http': 'http://122.5.131.115:808'}, {'http': 'http://117.91.138.74:808'}, {'http': 'http://122.241.74.96:808'}, {'http': 'http://119.5.1.39:808'}, {'http': 'http://58.52.201.117:8080'}, {'http': 'http://222.74.225.231:3128'}, {'http': 'http://110.189.223.140:808'}, {'http': 'http://115.220.146.29:808'}, {'http': 'http://60.178.86.48:808'}, {'http': 'http://113.58.234.187:808'}, {'http': 'http://222.95.21.137:808'}, {'http': 'http://175.155.25.27:808'}, {'http': 'http://202.202.90.20:8080'}, {'http': 'http://115.203.65.123:808'}, {'http': 'http://110.73.28.150:8123'}, {'http': 'http://121.31.86.129:80'}, {'http': 'http://113.79.75.27:9797'}, {'http': 'http://110.73.7.184:8123'}, {'http': 'http://110.73.29.125:8123'}, {'http': 'http://114.239.1.184:808'}, {'http': 'http://222.169.193.162:8099'}, {'http': 'http://119.5.1.53:808'}, {'http': 'http://111.155.116.201:8123'}, {'http': 'http://117.57.188.146:8998'}, {'http': 'http://60.176.79.22:808'}, {'http': 'http://60.176.78.191:808'}, {'http': 'http://175.155.244.179:808'}, {'http': 'http://49.83.219.51:808'}, {'http': 'http://175.155.136.154:808'}, {'http': 'http://118.193.23.162:3128'}, {'http': 'http://113.69.39.156:808'}, {'http': 'http://175.155.25.6:808'}, {'http': 'http://113.69.255.70:808'}, {'http': 'http://119.5.0.7:808'}, {'http': 'http://119.5.0.95:808'}, {'http': 'http://222.85.19.112:49030'}, {'http': 'http://182.42.37.143:808'}, {'http': 'http://121.31.155.135:8123'}, {'http': 'http://183.128.66.110:27040'}, {'http': 'http://121.226.164.35:808'}, {'http': 'http://121.235.234.239:45278'}, {'http': 'http://119.5.0.99:808'}, {'http': 'http://124.206.89.242:3128'}, {'http': 'http://61.160.190.34:8088'}, {'http': 'http://61.152.81.193:9100'}, {'http': 'http://111.192.60.55:9000'}, {'http': 'http://27.46.36.170:9797'}, {'http': 'http://115.220.6.32:808'}, {'http': 'http://175.155.142.166:80'}, {'http': 'http://221.238.140.210:81'}, {'http': 'http://123.169.91.89:808'}, {'http': 'http://182.90.78.71:8123'}, {'http': 'http://121.61.99.41:808'}, {'http': 'http://110.73.1.58:8123'}, {'http': 'http://120.34.46.209:808'}, {'http': 'http://113.121.21.74:808'}, {'http': 'http://114.239.144.248:808'}, {'http': 'http://120.36.251.181:8123'}, {'http': 'http://110.73.49.170:8123'}, {'http': 'http://115.220.149.159:808'}, {'http': 'http://111.155.116.239:8123'}, {'http': 'http://115.220.150.245:808'}, {'http': 'http://110.73.39.246:8123'}, {'http': 'http://111.155.116.247:8123'}, {'http': 'http://110.73.5.155:8123'}, {'http': 'http://121.31.170.186:8123'}, {'http': 'http://27.159.124.26:8118'}, {'http': 'http://111.78.46.102:808'}, {'http': 'http://182.88.88.37:8123'}, {'http': 'http://221.229.45.17:808'}, {'http': 'http://115.220.5.73:808'}, {'http': 'http://114.239.149.141:808'}, {'http': 'http://119.5.0.97:808'}, {'http': 'http://113.121.249.111:808'}, {'http': 'http://121.62.138.66:808'}, {'http': 'http://182.32.159.92:808'}, {'http': 'http://113.121.249.111:808'}, {'http': 'http://121.62.138.66:808'}, {'http': 'http://182.32.159.92:808'}, {'http': 'http://182.32.151.153:808'}, {'http': 'http://119.5.1.56:808'}, {'http': 'http://171.13.37.230:808'}, {'http': 'http://110.73.15.102:8123'}, {'http': 'http://175.155.24.20:808'}, {'http': 'http://123.169.89.72:808'}, {'http': 'http://218.95.27.159:8998'}, {'http': 'http://117.34.202.132:8118'}, {'http': 'http://122.241.74.42:808'}, {'http': 'http://221.229.47.62:808'}, {'http': 'http://183.78.183.156:82'}, {'http': 'http://221.229.47.187:808'}, {'http': 'http://113.69.213.40:808'}, {'http': 'http://221.229.47.90:808'}, {'http': 'http://122.245.64.192:808'}, {'http': 'http://122.241.75.164:808'}, {'http': 'http://110.73.0.182:8123'}, {'http': 'http://113.14.166.114:8998'}, {'http': 'http://110.73.36.214:8123'}, {'http': 'http://110.73.15.49:8123'}, {'http': 'http://122.5.129.115:808'}, {'http': 'http://115.203.91.63:808'}, {'http': 'http://115.220.150.9:808'}, {'http': 'http://121.61.108.253:808'}, {'http': 'http://180.107.207.43:8998'}, {'http': 'http://123.169.35.239:808'}, {'http': 'http://113.105.80.61:8080'}, {'http': 'http://125.89.121.144:808'}, {'http': 'http://222.95.17.120:808'}, {'http': 'http://183.32.233.214:808'}, {'http': 'http://113.140.139.192:80'}, {'http': 'http://124.207.113.220:8118'}, {'http': 'http://116.204.64.97:8080'}, {'http': 'http://27.46.74.39:9999'}, {'http': 'http://175.155.240.203:808'}, {'http': 'http://122.245.66.94:808'}, {'http': 'http://175.155.24.107:808'}, {'http': 'http://115.220.0.177:808'}, {'http': 'http://115.220.146.187:808'}, {'http': 'http://119.5.0.89:808'}, {'http': 'http://115.234.146.182:8998'}, {'http': 'http://175.155.245.205:808'}, {'http': 'http://182.32.150.167:808'}, {'http': 'http://221.229.44.23:808'}, {'http': 'http://115.220.4.230:808'}, {'http': 'http://114.239.145.19:808'}, {'http': 'http://222.95.23.46:808'}, {'http': 'http://124.193.85.88:8080'}, {'http': 'http://111.155.116.240:8123'}, {'http': 'http://222.186.45.19:63334'}, {'http': 'http://114.238.130.25:22056'}, {'http': 'http://121.205.254.175:46895'}, {'http': 'http://222.186.45.112:62222'}, {'http': 'http://121.69.3.102:8080'}, {'http': 'http://119.7.76.197:808'}, {'http': 'http://222.186.161.132:3128'}, {'http': 'http://221.229.47.47:808'}, {'http': 'http://222.85.50.111:808'}, {'http': 'http://115.215.70.177:808'}, {'http': 'http://116.28.118.139:808'}, {'http': 'http://117.31.177.171:808'}, {'http': 'http://117.82.205.157:8998'}, {'http': 'http://124.205.92.74:3128'}, {'http': 'http://113.93.100.26:808'}, {'http': 'http://116.28.109.58:808'}, {'http': 'http://111.72.154.154:808'}, {'http': 'http://116.28.119.89:808'}, {'http': 'http://119.5.1.114:808'}, {'http': 'http://123.163.167.211:808'}, {'http': 'http://180.110.17.189:808'}, {'http': 'http://171.13.36.146:808'}, {'http': 'http://114.239.2.143:808'}, {'http': 'http://123.55.191.216:808'}, {'http': 'http://114.238.130.5:25058'}, {'http': 'http://115.220.5.58:808'}, {'http': 'http://183.32.89.83:808'}, {'http': 'http://111.155.124.79:8123'}, {'http': 'http://121.61.98.211:808'}, {'http': 'http://182.44.213.41:808'}, {'http': 'http://106.0.7.81:8081'}, {'http': 'http://114.239.150.137:48181'}, {'http': 'http://113.121.250.31:808'}, {'http': 'http://222.85.39.52:808'}, {'http': 'http://117.91.138.63:808'}, {'http': 'http://60.205.184.144:3128'}, {'http': 'http://58.210.202.234:808'}, {'http': 'http://183.153.23.191:808'}, {'http': 'http://175.155.24.50:808'}, {'http': 'http://115.220.7.89:808'}, {'http': 'http://115.220.7.131:808'}, {'http': 'http://115.220.5.244:808'}, {'http': 'http://123.169.90.44:808'}, {'http': 'http://182.90.117.219:8123'}, {'http': 'http://61.136.163.245:3128'}, {'http': 'http://60.178.86.123:808'}, {'http': 'http://115.220.147.78:808'}, {'http': 'http://202.197.127.139:1209'}, {'http': 'http://175.155.241.81:808'}, {'http': 'http://115.220.7.215:808'}, {'http': 'http://218.241.153.211:81'}, {'http': 'http://183.157.186.211:80'}, {'http': 'http://119.5.1.42:808'}, {'http': 'http://175.155.25.41:808'}, {'http': 'http://122.5.132.220:808'}, {'http': 'http://182.88.15.170:8123'}, {'http': 'http://123.170.255.90:808'}, {'http': 'http://1.119.129.2:8080'}, {'http': 'http://218.64.92.150:808'}, {'http': 'http://110.73.39.178:8123'}, {'http': 'http://119.7.76.238:808'}, {'http': 'http://115.220.1.200:808'}, {'http': 'http://113.121.23.121:21743'}, {'http': 'http://115.220.146.134:808'}, {'http': 'http://175.155.24.12:808'}, {'http': 'http://221.229.45.104:808'}, {'http': 'http://123.55.191.115:808'}, {'http': 'http://121.31.100.108:8123'}, {'http': 'http://222.85.50.191:808'}, {'http': 'http://115.220.147.182:808'}, {'http': 'http://171.13.36.126:808'}, {'http': 'http://222.85.39.105:21238'}, {'http': 'http://114.239.147.229:808'}, {'http': 'http://115.220.2.57:808'}, {'http': 'http://49.65.151.25:808'}, {'http': 'http://175.155.25.36:808'}, {'http': 'http://222.85.39.36:808'}, {'http': 'http://222.85.50.238:24876'}, {'http': 'http://171.13.36.166:808'}, {'http': 'http://222.85.39.167:808'}, {'http': 'http://60.19.236.30:808'}, {'http': 'http://118.73.200.212:80'}, {'http': 'http://115.220.3.102:808'}, {'http': 'http://175.155.24.34:808'}, {'http': 'http://222.85.50.148:808'}, {'http': 'http://119.7.75.181:808'}, {'http': 'http://121.61.96.227:808'}, {'http': 'http://183.63.110.202:3128'}, {'http': 'http://222.85.39.115:808'}, {'http': 'http://115.220.144.34:808'}, {'http': 'http://39.79.103.174:9000'}, {'http': 'http://175.155.24.45:808'}, {'http': 'http://171.39.39.133:8123'}, {'http': 'http://113.65.20.222:9999'}, {'http': 'http://171.37.85.16:8123'}, {'http': 'http://125.89.120.187:808'}, {'http': 'http://119.5.0.50:808'}, {'http': 'http://119.5.1.37:808'}, {'http': 'http://60.184.172.13:808'}, {'http': 'http://222.95.19.166:808'}, {'http': 'http://113.121.243.254:808'}, {'http': 'http://222.85.50.135:808'}, {'http': 'http://175.155.246.9:808'}, {'http': 'http://123.169.88.35:808'}, {'http': 'http://175.155.152.151:808'}, {'http': 'http://119.5.0.3:808'}, {'http': 'http://110.72.234.158:808'}, {'http': 'http://175.169.135.17:8118'}, {'http': 'http://115.220.148.36:808'}, {'http': 'http://119.5.0.115:808'}, {'http': 'http://113.69.61.49:808'}, {'http': 'http://180.119.76.121:808'}, {'http': 'http://115.220.2.60:808'}, {'http': 'http://122.241.75.173:808'}, {'http': 'http://221.215.192.95:9999'}, {'http': 'http://180.115.6.172:39145'}, {'http': 'http://221.229.46.177:808'}, {'http': 'http://119.5.0.44:808'}, {'http': 'http://175.155.142.30:808'}, {'http': 'http://125.118.70.242:808'}, {'http': 'http://222.85.50.128:808'}, {'http': 'http://182.45.179.237:808'}, {'http': 'http://124.89.33.75:9999'}, {'http': 'http://222.95.16.99:808'}, {'http': 'http://175.155.25.116:808'}, {'http': 'http://36.249.30.19:808'}, {'http': 'http://119.5.0.52:808'}, {'http': 'http://175.155.136.151:808'}, {'http': 'http://122.5.128.230:808'}, {'http': 'http://222.85.39.122:808'}, {'http': 'http://222.85.50.22:808'}, {'http': 'http://180.118.55.77:808'}, {'http': 'http://171.13.37.46:808'}, {'http': 'http://175.155.240.198:808'}, {'http': 'http://175.155.24.13:808'}, {'http': 'http://116.28.123.137:808'}, {'http': 'http://60.184.172.131:808'}, {'http': 'http://111.76.224.50:808'}, {'http': 'http://112.239.4.245:808'}, {'http': 'http://59.62.127.86:808'}, {'http': 'http://114.239.144.37:808'}, {'http': 'http://221.229.44.122:808'}, {'http': 'http://222.85.50.224:808'}, {'http': 'http://171.13.36.124:808'}, {'http': 'http://175.43.106.190:808'}, {'http': 'http://175.155.246.19:808'}, {'http': 'http://175.155.24.42:808'}, {'http': 'http://175.155.24.22:808'}, {'http': 'http://115.220.4.22:808'}, {'http': 'http://115.220.1.207:808'}, {'http': 'http://175.155.240.233:808'}, {'http': 'http://218.64.92.179:808'}, {'http': 'http://183.32.88.231:808'}, {'http': 'http://175.155.25.52:808'}, {'http': 'http://60.184.174.78:808'}, {'http': 'http://222.85.39.41:808'}, {'http': 'http://171.38.187.33:8123'}, {'http': 'http://115.215.69.139:808'}, {'http': 'http://119.5.0.28:808'}, {'http': 'http://60.184.172.208:808'}, {'http': 'http://175.155.24.25:808'}, {'http': 'http://222.85.50.159:808'}, {'http': 'http://60.184.174.28:808'}, {'http': 'http://125.89.121.29:808'}, {'http': 'http://114.239.0.242:808'}, {'http': 'http://171.8.6.61:808'}, {'http': 'http://180.173.51.74:9000'}, {'http': 'http://112.111.217.9:808'}, {'http': 'http://119.5.1.41:808'}, {'http': 'http://113.121.244.196:808'}, {'http': 'http://113.121.180.204:808'}, {'http': 'http://115.220.6.230:808'}, {'http': 'http://175.43.106.93:808'}, {'http': 'http://101.81.143.232:9000'}, {'http': 'http://180.119.76.105:808'}, {'http': 'http://175.155.24.28:808'}, {'http': 'http://222.85.50.186:808'}, {'http': 'http://218.64.92.242:808'}, {'http': 'http://122.245.71.18:808'}, {'http': 'http://222.85.39.59:808'}, {'http': 'http://121.61.110.23:808'}, {'http': 'http://117.33.130.106:8118'}, {'http': 'http://118.120.189.19:9797'}, {'http': 'http://113.121.243.31:808'}, {'http': 'http://125.93.149.10:9000'}, {'http': 'http://175.155.242.114:808'}, {'http': 'http://60.184.172.103:808'}, {'http': 'http://117.85.87.177:808'}, {'http': 'http://123.163.164.150:808'}, {'http': 'http://218.64.93.147:808'}, {'http': 'http://120.25.107.37:1080'}, {'http': 'http://114.230.31.32:808'}, {'http': 'http://119.5.0.29:808'}, {'http': 'http://222.85.39.100:9999'}, {'http': 'http://121.61.99.68:8118'}, {'http': 'http://175.155.240.79:808'}, {'http': 'http://175.155.25.26:808'}, {'http': 'http://125.89.95.139:808'}, {'http': 'http://60.184.172.78:808'}, {'http': 'http://222.94.151.30:808'}, {'http': 'http://60.184.172.156:808'}, {'http': 'http://221.229.44.157:808'}, {'http': 'http://171.13.37.127:808'}, {'http': 'http://115.220.3.197:808'}, {'http': 'http://113.123.25.254:808'}, {'http': 'http://171.13.36.56:808'}, {'http': 'http://222.94.149.59:808'}, {'http': 'http://61.174.9.237:8090'}, {'http': 'http://123.169.85.11:808'}, {'http': 'http://119.5.0.55:808'}, {'http': 'http://119.5.217.38:808'}, {'http': 'http://163.125.245.184:9797'}, {'http': 'http://113.122.150.13:808'}, {'http': 'http://171.13.36.183:808'}, {'http': 'http://120.83.97.125:808'}, {'http': 'http://171.13.36.6:808'}, {'http': 'http://119.5.1.21:808'}, {'http': 'http://119.5.1.3:808'}, {'http': 'http://121.31.146.165:8123'}, {'http': 'http://114.230.96.33:808'}, {'http': 'http://113.121.252.59:808'}, {'http': 'http://114.231.65.238:808'}, {'http': 'http://113.58.232.224:808'}, {'http': 'http://115.212.82.161:808'}, {'http': 'http://27.219.171.227:808'}, {'http': 'http://106.120.78.129:80'}, {'http': 'http://221.229.45.20:808'}, {'http': 'http://111.155.116.238:8123'}, {'http': 'http://221.229.47.118:808'}, {'http': 'http://115.213.206.192:808'}, {'http': 'http://171.13.37.174:808'}, {'http': 'http://175.155.24.40:808'}, {'http': 'http://113.69.254.46:808'}, {'http': 'http://121.13.55.57:3128'}, {'http': 'http://113.69.253.130:808'}, {'http': 'http://183.45.30.236:8118'}, {'http': 'http://27.46.42.84:9797'}, {'http': 'http://115.220.150.100:808'}, {'http': 'http://223.245.182.253:808'}, {'http': 'http://115.203.73.151:808'}, {'http': 'http://180.110.7.211:808'}, {'http': 'http://175.155.25.11:808'}, {'http': 'http://58.217.255.184:1080'}, {'http': 'http://171.38.26.191:8123'}, {'http': 'http://182.43.171.244:808'}, {'http': 'http://111.155.116.215:8123'}, {'http': 'http://222.85.39.83:808'}, {'http': 'http://115.220.149.252:808'}, {'http': 'http://222.94.150.229:808'}, {'http': 'http://113.121.246.67:808'}, {'http': 'http://115.220.145.27:808'}, {'http': 'http://120.34.41.226:808'}, {'http': 'http://222.33.192.238:8118'}, {'http': 'http://171.38.178.17:8123'}, {'http': 'http://221.229.18.213:808'}, {'http': 'http://115.220.151.70:808'}, {'http': 'http://115.203.75.247:808'}, {'http': 'http://221.229.44.64:808'}, {'http': 'http://113.69.62.127:808'}, {'http': 'http://171.38.87.251:8123'}, {'http': 'http://115.220.5.67:808'}, {'http': 'http://106.0.6.165:8081'}, {'http': 'http://113.121.252.32:9999'}, {'http': 'http://113.121.254.91:808'}, {'http': 'http://110.73.9.244:8123'}, {'http': 'http://119.5.1.32:808'}, {'http': 'http://117.91.138.93:808'}, {'http': 'http://114.99.21.0:808'}, {'http': 'http://182.90.70.202:8123'}, {'http': 'http://115.213.200.125:808'}, {'http': 'http://115.220.147.238:808'}, {'http': 'http://60.176.206.126:808'}, {'http': 'http://112.64.76.185:8123'}, {'http': 'http://221.229.47.152:808'}, {'http': 'http://182.43.233.194:9999'}, {'http': 'http://115.220.4.7:808'}, {'http': 'http://222.85.39.76:808'}, {'http': 'http://222.95.16.194:808'}, {'http': 'http://115.220.149.188:808'}, {'http': 'http://115.220.151.61:808'}, {'http': 'http://122.241.73.78:808'}, {'http': 'http://113.69.252.20:808'}, {'http': 'http://121.31.100.9:8123'}, {'http': 'http://183.32.88.186:808'}, {'http': 'http://222.85.39.39:808'}, {'http': 'http://221.216.94.132:8123'}, {'http': 'http://119.5.1.22:808'}, {'http': 'http://110.73.49.203:8123'}, {'http': 'http://121.226.175.73:808'}, {'http': 'http://110.73.201.113:8123'}, {'http': 'http://121.31.149.53:8123'}, {'http': 'http://115.220.151.88:808'}, {'http': 'http://218.75.149.207:3128'}, {'http': 'http://121.31.144.234:8123'}, {'http': 'http://49.84.80.93:41364'}, {'http': 'http://123.96.183.92:3128'}, {'http': 'http://180.122.156.151:33707'}, {'http': 'http://180.110.5.18:808'}, {'http': 'http://171.13.36.29:808'}, {'http': 'http://222.85.50.102:808'}, {'http': 'http://122.241.75.117:808'}, {'http': 'http://119.5.1.40:808'}, {'http': 'http://122.241.75.245:808'}, {'http': 'http://110.73.2.28:8123'}, {'http': 'http://183.32.89.54:808'}, {'http': 'http://221.227.110.0:808'}, {'http': 'http://113.121.43.135:808'}, {'http': 'http://1.56.214.137:808'}, {'http': 'http://27.159.126.244:8118'}, {'http': 'http://115.197.52.222:8998'}, {'http': 'http://125.92.32.9:808'}, {'http': 'http://27.159.124.22:8118'}, {'http': 'http://117.91.138.26:808'}, {'http': 'http://125.89.120.171:808'}, {'http': 'http://175.155.68.214:808'}, {'http': 'http://117.43.1.224:808'}, {'http': 'http://118.178.124.33:3128'}, {'http': 'http://171.13.36.241:808'}, {'http': 'http://117.28.116.219:32357'}, {'http': 'http://220.198.115.33:9000'}, {'http': 'http://60.178.85.245:808'}, {'http': 'http://110.182.18.51:8118'}, {'http': 'http://119.5.218.115:808'}, {'http': 'http://121.31.78.126:8123'}, {'http': 'http://116.2.128.235:80'}, {'http': 'http://180.97.235.30:80'}, {'http': 'http://113.121.254.154:808'}, {'http': 'http://115.220.147.119:808'}, {'http': 'http://221.229.44.221:808'}, {'http': 'http://49.86.62.155:808'}, {'http': 'http://113.71.112.77:808'}, {'http': 'http://116.242.4.141:3128'}, {'http': 'http://118.144.176.6:3128'}, {'http': 'http://183.128.183.214:808'}, {'http': 'http://113.121.246.223:808'}, {'http': 'http://171.13.36.229:21706'}, {'http': 'http://180.114.93.137:23899'}, {'http': 'http://175.155.24.38:808'}, {'http': 'http://223.240.212.72:808'}, {'http': 'http://101.70.192.11:80'}, {'http': 'http://113.121.248.22:808'}, {'http': 'http://36.249.27.212:808'}, {'http': 'http://113.121.246.30:808'}, {'http': 'http://175.155.244.95:808'}, {'http': 'http://171.38.128.162:8123'}, {'http': 'http://49.86.62.139:808'}, {'http': 'http://119.5.1.19:808'}, {'http': 'http://101.53.101.172:9999'}, {'http': 'http://119.5.1.19:808'}, {'http': 'http://101.53.101.172:9999'}, {'http': 'http://119.5.0.85:808'}, {'http': 'http://222.52.142.242:8080'}, {'http': 'http://183.32.88.234:808'}, {'http': 'http://182.200.56.238:8118'}, {'http': 'http://171.13.36.13:808'}, {'http': 'http://119.5.0.37:808'}, {'http': 'http://119.5.0.109:808'}, {'http': 'http://117.43.0.19:808'}, {'http': 'http://202.121.178.244:80'}, {'http': 'http://59.62.109.210:808'}, {'http': 'http://114.255.193.242:8080'}, {'http': 'http://59.62.112.117:808'}, {'http': 'http://111.155.124.94:8123'}, {'http': 'http://218.59.4.89:8080'}, {'http': 'http://183.32.89.105:808'}, {'http': 'http://115.220.146.59:808'}, {'http': 'http://122.5.133.237:808'}, {'http': 'http://175.155.24.114:808'}, {'http': 'http://183.152.166.19:3128'}, {'http': 'http://175.155.243.38:808'}, {'http': 'http://222.85.50.123:808'}, {'http': 'http://183.153.15.123:808'}, {'http': 'http://113.73.7.181:808'}, {'http': 'http://180.114.172.131:31609'}, {'http': 'http://119.5.1.121:808'}, {'http': 'http://222.85.50.206:808'}, {'http': 'http://115.202.185.32:808'}, {'http': 'http://182.42.41.108:808'}, {'http': 'http://110.73.14.11:8123'}, {'http': 'http://115.202.190.241:808'}, {'http': 'http://118.144.149.200:3128'}, {'http': 'http://222.85.39.104:808'}, {'http': 'http://122.241.73.197:808'}, {'http': 'http://117.43.0.166:808'}, {'http': 'http://175.155.25.67:808'}, {'http': 'http://171.13.12.89:808'}, {'http': 'http://175.155.242.90:808'}, {'http': 'http://113.121.250.88:808'}, {'http': 'http://221.229.47.112:808'}, {'http': 'http://175.155.25.59:808'}, {'http': 'http://183.39.159.8:808'}, {'http': 'http://222.85.50.150:808'}, {'http': 'http://125.41.9.238:8118'}, {'http': 'http://115.220.5.41:808'}, {'http': 'http://115.203.91.209:808'}, {'http': 'http://115.203.180.90:808'}, {'http': 'http://115.220.148.43:808'}, {'http': 'http://222.85.50.70:808'}, {'http': 'http://222.85.39.19:40065'}, {'http': 'http://175.155.246.89:808'}, {'http': 'http://114.239.0.55:808'}, {'http': 'http://110.73.7.86:8123'}, {'http': 'http://119.5.0.48:808'}, {'http': 'http://115.220.6.153:808'}, {'http': 'http://221.229.46.112:808'}, {'http': 'http://122.241.73.0:808'}, {'http': 'http://118.213.234.220:8998'}, {'http': 'http://113.121.249.154:808'}, {'http': 'http://171.13.37.20:808'}, {'http': 'http://123.55.191.41:808'}, {'http': 'http://121.31.197.244:8123'}, {'http': 'http://113.93.186.75:808'}, {'http': 'http://113.81.251.76:9797'}, {'http': 'http://115.220.2.192:808'}, {'http': 'http://121.31.101.9:8123'}, {'http': 'http://180.119.76.69:808'}, {'http': 'http://122.5.132.196:808'}, {'http': 'http://121.204.165.53:8118'}, {'http': 'http://125.89.122.219:808'}, {'http': 'http://182.42.23.200:808'}, {'http': 'http://183.32.88.36:808'}, {'http': 'http://121.41.110.49:3128'}, {'http': 'http://221.229.46.155:808'}, {'http': 'http://175.155.25.103:808'}, {'http': 'http://183.32.88.29:808'}, {'http': 'http://175.155.152.199:808'}, {'http': 'http://110.17.3.15:8118'}, {'http': 'http://119.5.1.9:808'}, {'http': 'http://111.124.80.110:8998'}, {'http': 'http://60.178.85.184:808'}, {'http': 'http://114.230.122.177:808'}, {'http': 'http://115.207.37.159:808'}, {'http': 'http://113.121.245.70:808'}, {'http': 'http://59.62.124.161:808'}, {'http': 'http://222.85.50.28:808'}, {'http': 'http://222.85.50.83:808'}, {'http': 'http://115.213.247.191:808'}, {'http': 'http://119.5.0.110:808'}, {'http': 'http://175.155.25.12:808'}, {'http': 'http://59.44.247.194:9797'}, {'http': 'http://113.121.167.106:808'}, {'http': 'http://110.73.13.2:8123'}, {'http': 'http://113.58.232.46:808'}, {'http': 'http://110.73.13.239:8123'}, {'http': 'http://114.99.23.170:808'}, {'http': 'http://182.38.23.119:808'}, {'http': 'http://140.224.76.176:41258'}, {'http': 'http://117.24.33.113:34590'}]

header = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.104 Safari/537.36 Core/1.53.2604.400 QQBrowser/9.6.10875.400'}
    # http请求头
def get_proxy():
    proxies_test = random.choice(proxies_list)
    r = requests.get('https://www.baidu.com', proxies=proxies_test)
    if r.status_code == 200:
        return proxies_test
    else:
        get_proxy()

def find_MaxPage():
    all_url = 'http://www.mzitu.com'
    proxies = get_proxy()
    wb_data = requests.get(all_url,headers = header,proxies=proxies)
    #找寻最大页数
    soup = BeautifulSoup(wb_data.text,"html.parser")
    page = soup.find_all('a',class_='page-numbers')
    max_page = page[-2].text
    return max_page

def Download(href,header,title,path):
    # proxies = get_proxy()
    time.sleep(1)
    wb_data = requests.get(href,headers = header)
    soup = BeautifulSoup(wb_data.text,'html.parser')
    pic_max = soup.find_all('span')
    pic_max = pic_max[10].text  # 最大页数
    if(os.path.exists(path+title.strip().replace('?','')) and len(os.listdir(path+title.strip().replace('?',''))) >= int(pic_max)):
        print('已完毕，跳过'+title)
        return 1
    print("开始扒取：" + title)
    os.makedirs(path+title.strip().replace('?',''))
    os.chdir(path + title.strip().replace('?',''))
    for num in range(1,int(pic_max)+1):
        pic = href+'/'+str(num)
        #print(pic)
        # proxies = get_proxy()
        time.sleep(1)
        pic_wb = requests.get(pic,headers = header)
        mess = BeautifulSoup(pic_wb.text,"html.parser")
        pic_url = mess.find('img',alt = title)
        img = requests.get(pic_url['src'],headers = header)
        file_name = pic_url['src'].split(r'/')[-1]
        f = open(file_name,'wb')
        f.write(img.content)
        f.close()
    print('完成'+title)


'''
#安卓端需要此语句
reload(sys)
sys.setdefaultencoding('utf-8')
'''


if __name__=='__main__':
    if (os.name == 'nt'):
        print(u'你正在使用win平台')
    else:
        print(u'你正在使用linux平台')

    # header = {
    #     'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 UBrowser/6.1.2107.204 Safari/537.36'}
    # # http请求头
    path = 'E:/mzitu/'
    max_page = find_MaxPage()
    base_url = 'http://www.mzitu.com/page/'

    #
    pool = Pool()
    # for n in range(1,int(max_page)+1):
    for n in range(1,2):
        each_url = base_url+str(n)
        wb_data = requests.get(each_url, headers=header)
        soup = BeautifulSoup(wb_data.text, "html.parser")
        all_a = soup.find('div', class_='postlist').find_all('a', target='_blank')
        for a in all_a:
            title = a.get_text()  # 提取文本
            if (title != ''):
                href = a['href']
                pool.apply_async(Download,args=(href,header,title,path))
    pool.close()
    pool.join()
    print('所有图片已下完')
